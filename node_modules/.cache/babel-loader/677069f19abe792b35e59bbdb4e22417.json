{"ast":null,"code":"import _objectSpread from\"D:/Repositories/Visual C++/PosThis-React-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Repositories/Visual C++/PosThis-React-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{makeStyles}from'@material-ui/core/styles';import{CircularProgress}from'@material-ui/core';import{NavBar,PostContainer}from'components/Inicio';import{CreatePostForm}from'components/Post';import{handleResponse}from'_helpers';import{authenticationService}from'_services';import{getFeed}from'_api';import backapp3 from'assets/backapp3.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{Background:{backgroundImage:\"url('\".concat(backapp3,\"')\"),backgroundSize:'cover',backgroundPosition:'center',backgroundAttachment:'fixed',backgroundRepeat:'no-repeat',minHeight:'100vh'},titleBegin:{color:'white',fontFamily:'Arial',fontStyle:'normal',fontSize:30,width:'100%',marginTop:'24px',paddingBottom:theme.spacing(3),textAlign:'center',flexDirection:'column'},loading:{position:'fixed',display:'flex',alignItems:'center',justifyContent:'center',top:'0',left:'0',width:'100vw',height:'100vh',zIndex:'1000',backgroundColor:'#00000055'}};});export var Feed=function Feed(props){var history=props.history;var classes=useStyles();var _useState=useState({posts:[],loading:false}),_useState2=_slicedToArray(_useState,2),_useState2$=_useState2[0],posts=_useState2$.posts,loading=_useState2$.loading,setState=_useState2[1];var loadFeed=function loadFeed(){setState(function(x){var copy=_objectSpread({},x);copy.loading=true;return copy;});getFeed(authenticationService.currentUserValue.id).then(handleResponse).then(function(res){var data=res.data;setState(function(x){var copy=_objectSpread({},x);copy.loading=false;copy.posts=data;return copy;});}).catch(console.warn);};useEffect(function(){loadFeed();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:classes.loading,children:/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.Background,children:[/*#__PURE__*/_jsx(NavBar,{history:history}),/*#__PURE__*/_jsx(\"div\",{component:\"h4\",variant:\"h2\",className:classes.titleBegin,children:/*#__PURE__*/_jsx(\"strong\",{children:\"Crear Post\"})}),/*#__PURE__*/_jsx(CreatePostForm,{afterUpdate:loadFeed}),posts.length!==0&&/*#__PURE__*/_jsx(PostContainer,{posts:posts,history:history})]})]});};export default Feed;","map":{"version":3,"sources":["D:/Repositories/Visual C++/PosThis-React-app/src/components/Feed.js"],"names":["React","useState","useEffect","makeStyles","CircularProgress","NavBar","PostContainer","CreatePostForm","handleResponse","authenticationService","getFeed","backapp3","useStyles","theme","Background","backgroundImage","backgroundSize","backgroundPosition","backgroundAttachment","backgroundRepeat","minHeight","titleBegin","color","fontFamily","fontStyle","fontSize","width","marginTop","paddingBottom","spacing","textAlign","flexDirection","loading","position","display","alignItems","justifyContent","top","left","height","zIndex","backgroundColor","Feed","props","history","classes","posts","setState","loadFeed","x","copy","currentUserValue","id","then","res","data","catch","console","warn","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { makeStyles }                 from '@material-ui/core/styles';\r\nimport { CircularProgress }           from '@material-ui/core';\r\n\r\nimport { NavBar, PostContainer }      from 'components/Inicio';\r\nimport { CreatePostForm }             from 'components/Post';\r\n\r\nimport { handleResponse }             from '_helpers';\r\nimport { authenticationService }      from '_services';\r\nimport { getFeed }                    from '_api';\r\n\r\nimport backapp3                       from 'assets/backapp3.png';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  Background: {\r\n    backgroundImage: `url('${backapp3}')`,\r\n    backgroundSize: 'cover',\r\n    backgroundPosition: 'center',\r\n    backgroundAttachment: 'fixed',\r\n    backgroundRepeat: 'no-repeat',\r\n    minHeight: '100vh'\r\n  },\r\n  titleBegin:{\r\n    color: 'white',\r\n    fontFamily: 'Arial',\r\n    fontStyle: 'normal',\r\n    fontSize: 30,\r\n    width: '100%',\r\n    marginTop: '24px',\r\n    paddingBottom: theme.spacing(3),\r\n    textAlign: 'center',\r\n    flexDirection:'column',\r\n  },\r\n  loading:{\r\n    position:       'fixed',\r\n    display:        'flex',\r\n    alignItems:     'center',\r\n    justifyContent: 'center',\r\n    top:            '0',\r\n    left:           '0',\r\n    width:          '100vw',\r\n    height:         '100vh',\r\n    zIndex:         '1000',\r\n    backgroundColor: '#00000055',\r\n  }\r\n}));\r\n\r\nexport const Feed = (props) => {\r\n\r\n  const { history } = props;\r\n  \r\n  const classes = useStyles();\r\n\r\n  const [{ posts, loading }, setState] = useState({\r\n    posts: [],\r\n    loading: false\r\n  });\r\n\r\n  const loadFeed = ()=>{\r\n    \r\n    setState(x=>{\r\n      let copy = {...x};\r\n      copy.loading = true;\r\n      return copy;\r\n    });\r\n\r\n    getFeed(authenticationService.currentUserValue.id)\r\n      .then(handleResponse)\r\n      .then(res=>{\r\n        const { data } = res;\r\n        setState(x=>{\r\n          let copy = {...x};\r\n          copy.loading = false;\r\n          copy.posts = data;\r\n          return copy;\r\n        });\r\n      })\r\n      .catch(console.warn);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadFeed();\r\n  },[]);\r\n\r\n  return (\r\n  <>\r\n    {\r\n      loading &&\r\n      <div className={classes.loading}>\r\n        <CircularProgress color='primary'/>\r\n      </div>\r\n    }\r\n    <div className={classes.Background}>\r\n      <NavBar history={history}/>\r\n      <div component='h4' variant='h2' className={classes.titleBegin}>\r\n        <strong>Crear Post</strong>\r\n      </div>\r\n      <CreatePostForm afterUpdate={loadFeed}/>\r\n      {\r\n        (posts.length !== 0) && <PostContainer posts={posts} history={history}/>\r\n      }\r\n    </div>\r\n  </>\r\n  );\r\n};\r\n\r\nexport default Feed;\r\n"]},"metadata":{},"sourceType":"module"}