{"ast":null,"code":"import{BehaviorSubject}from'rxjs';import{authTokenKey}from'_utils';import{handleResponse}from'_helpers';import{logIn}from'_api/users';var currentUserSubject=new BehaviorSubject(JSON.parse(localStorage.getItem(authTokenKey)));export var authenticationService={login:login,logout:logout,currentUser:currentUserSubject.asObservable(),get currentUserValue(){return currentUserSubject.value;}};function login(username,password){var data={username:username,password:password};return logIn(data).then(handleResponse).then(function(res){var user=res.data;localStorage.setItem(authTokenKey,JSON.stringify(user));currentUserSubject.next(user);return user;});}function logout(){localStorage.removeItem(authTokenKey);currentUserSubject.next(null);}","map":{"version":3,"sources":["D:/Repositories/Visual C++/PosThis-React-app/src/_services/authentication.service.js"],"names":["BehaviorSubject","authTokenKey","handleResponse","logIn","currentUserSubject","JSON","parse","localStorage","getItem","authenticationService","login","logout","currentUser","asObservable","currentUserValue","value","username","password","data","then","res","user","setItem","stringify","next","removeItem"],"mappings":"AAAA,OAASA,eAAT,KAAiC,MAAjC,CACA,OAASC,YAAT,KAAiC,QAAjC,CACA,OAASC,cAAT,KAAiC,UAAjC,CAEA,OAASC,KAAT,KAAiC,YAAjC,CAEA,GAAMC,CAAAA,kBAAkB,CAAG,GAAIJ,CAAAA,eAAJ,CAAqBK,IAAI,CAACC,KAAL,CAAYC,YAAY,CAACC,OAAb,CAAsBP,YAAtB,CAAZ,CAArB,CAA3B,CAEA,MAAO,IAAMQ,CAAAA,qBAAqB,CAAG,CACjCC,KAAK,CAALA,KADiC,CAEjCC,MAAM,CAANA,MAFiC,CAGjCC,WAAW,CAAER,kBAAkB,CAACS,YAAnB,EAHoB,CAIjC,GAAIC,CAAAA,gBAAJ,EAAwB,CAAE,MAAOV,CAAAA,kBAAkB,CAACW,KAA1B,CAAiC,CAJ1B,CAA9B,CAOP,QAASL,CAAAA,KAAT,CAAgBM,QAAhB,CAA0BC,QAA1B,CAAqC,CAEjC,GAAIC,CAAAA,IAAI,CAAG,CAAEF,QAAQ,CAARA,QAAF,CAAYC,QAAQ,CAARA,QAAZ,CAAX,CAEA,MAAOd,CAAAA,KAAK,CAACe,IAAD,CAAL,CACFC,IADE,CACGjB,cADH,EAEFiB,IAFE,CAEG,SAAAC,GAAG,CAAI,CACT,GAAIC,CAAAA,IAAI,CAAGD,GAAG,CAACF,IAAf,CACAX,YAAY,CAACe,OAAb,CAAsBrB,YAAtB,CAAoCI,IAAI,CAACkB,SAAL,CAAgBF,IAAhB,CAApC,EACAjB,kBAAkB,CAACoB,IAAnB,CAAyBH,IAAzB,EAEA,MAAOA,CAAAA,IAAP,CACH,CARE,CAAP,CASH,CAED,QAASV,CAAAA,MAAT,EAAkB,CACdJ,YAAY,CAACkB,UAAb,CAAyBxB,YAAzB,EACAG,kBAAkB,CAACoB,IAAnB,CAAwB,IAAxB,EACH","sourcesContent":["import { BehaviorSubject }  from 'rxjs';\r\nimport { authTokenKey }     from '_utils';\r\nimport { handleResponse }   from '_helpers';\r\n\r\nimport { logIn }            from '_api/users';\r\n\r\nconst currentUserSubject = new BehaviorSubject( JSON.parse( localStorage.getItem( authTokenKey ) ) );\r\n\r\nexport const authenticationService = {\r\n    login,\r\n    logout,\r\n    currentUser: currentUserSubject.asObservable(),\r\n    get currentUserValue () { return currentUserSubject.value }\r\n};\r\n\r\nfunction login( username, password ) {\r\n\r\n    let data = { username, password};\r\n\r\n    return logIn(data)\r\n        .then(handleResponse)\r\n        .then(res => {\r\n            let user = res.data;\r\n            localStorage.setItem( authTokenKey, JSON.stringify( user ) );\r\n            currentUserSubject.next( user );\r\n            \r\n            return user;\r\n        });\r\n}\r\n\r\nfunction logout() {\r\n    localStorage.removeItem( authTokenKey );\r\n    currentUserSubject.next(null);\r\n}"]},"metadata":{},"sourceType":"module"}